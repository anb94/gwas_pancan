Bootstrap: docker
From: ubuntu:18.04

%post
    # Update the package manager
    apt-get update
    apt-get upgrade -y
    # Install necessary packages
    apt install -y python3 python3-pip build-essential software-properties-common wget ubuntu-drivers-common tar bzip2 curl sed plink zip
    apt-get update
    apt-get upgrade -y
    pip3 install --upgrade pip
    pip3 install numpy pandas scipy matplotlib jupyterlab
    apt-get update
    apt-get upgrade -y


    # Install R & dependencies


    # Change to home directory
    cd /
    # Download SRA toolkit from ncbi
    wget https://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/2.10.8/sratoolkit.2.10.8-ubuntu64.tar.gz
    # Extract the toolkit
    tar -xzf sratoolkit.2.10.8-ubuntu64.tar.gz
    # Remove the extracted toolkit
    rm -rf sratoolkit.2.10.8-ubuntu64.tar.gz


    cd /
    # Download
    wget https://cnsgenomics.com/software/gcta/bin/gcta_1.93.2beta.zip
    # Install 
    unzip gcta_1.93.2beta.zip
    # Remove zip file
    rm -rf gcta_1.93.2beta.zip


    cd/

    wget http://s3.amazonaws.com/plink2-assets/plink2_linux_x86_64_20210123.zip

    unzip plink2_linux_x86_64_20210123.zip

    rm -rf plink2_linux_x86_64_20210123.zip

%environment
    export LC_ALL=C
    export PATH=/sratoolkit.2.10.8-ubuntu64/bin:$PATH
    export PATH=$PATH:/gcta_1.93.2beta/
    export PATH=$PATH:/plink2_linux_x86_64_20210123/

    